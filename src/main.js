var jn=Object.create;var ce=Object.defineProperty;var Nn=Object.getOwnPropertyDescriptor;var Hn=Object.getOwnPropertyNames;var Bn=Object.getPrototypeOf,xn=Object.prototype.hasOwnProperty;var Kn=(o,i)=>()=>(i||o((i={exports:{}}).exports,i),i.exports),Gn=(o,i)=>{for(var t in i)ce(o,t,{get:i[t],enumerable:!0})},or=(o,i,t,l)=>{if(i&&typeof i=="object"||typeof i=="function")for(let f of Hn(i))!xn.call(o,f)&&f!==t&&ce(o,f,{get:()=>i[f],enumerable:!(l=Nn(i,f))||l.enumerable});return o};var H=(o,i,t)=>(t=o!=null?jn(Bn(o)):{},or(i||!o||!o.__esModule?ce(t,"default",{value:o,enumerable:!0}):t,o)),qn=o=>or(ce({},"__esModule",{value:!0}),o);var hr=Kn((Tt,pr)=>{"use strict";var Pe=Object.defineProperty,zn=Object.getOwnPropertyDescriptor,Xn=Object.getOwnPropertyNames,Jn=Object.prototype.hasOwnProperty,Qn=(o,i)=>{for(var t in i)Pe(o,t,{get:i[t],enumerable:!0})},Yn=(o,i,t,l)=>{if(i&&typeof i=="object"||typeof i=="function")for(let f of Xn(i))!Jn.call(o,f)&&f!==t&&Pe(o,f,{get:()=>i[f],enumerable:!(l=zn(i,f))||l.enumerable});return o},Zn=o=>Yn(Pe({},"__esModule",{value:!0}),o),ar={};Qn(ar,{decode:()=>gt,encode:()=>ht,getDuration:()=>vt,isWav:()=>yt});pr.exports=Zn(ar);var fe=require("url").pathToFileURL(__filename),et=(()=>{var o=fe;return async function(i={}){var t=i,l,f;t.ready=new Promise((e,r)=>{l=e,f=r});var h=Object.assign({},t),v=[],y="./this.program",_=(e,r)=>{throw r},R=typeof window=="object",V=typeof importScripts=="function",K=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",A="";function mr(e){return t.locateFile?t.locateFile(e,A):A+e}var he,re,ne;if(K){let{createRequire:e}=await import("module");var ge=e(fe),ke=ge("fs"),ve=ge("path");V?A=ve.dirname(A)+"/":A=ge("url").fileURLToPath(new URL("./",fe)),he=(r,n)=>(r=ae(r)?new URL(r):ve.normalize(r),ke.readFileSync(r,n?void 0:"utf8")),ne=r=>{var n=he(r,!0);return n.buffer||(n=new Uint8Array(n)),n},re=(r,n,a,s=!0)=>{r=ae(r)?new URL(r):ve.normalize(r),ke.readFile(r,s?void 0:"utf8",(u,d)=>{u?a(u):n(s?d.buffer:d)})},!t.thisProgram&&process.argv.length>1&&(y=process.argv[1].replace(/\\/g,"/")),v=process.argv.slice(2),_=(r,n)=>{throw process.exitCode=r,n}}else(R||V)&&(V?A=self.location.href:typeof document<"u"&&document.currentScript&&(A=document.currentScript.src),o&&(A=o),A.startsWith("blob:")?A="":A=A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1),he=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},V&&(ne=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),re=(e,r,n)=>{var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=()=>{if(a.status==200||a.status==0&&a.response){r(a.response);return}n()},a.onerror=n,a.send(null)});var _t=t.print||console.log.bind(console),G=t.printErr||console.error.bind(console);Object.assign(t,h),h=null,t.arguments&&(v=t.arguments),t.thisProgram&&(y=t.thisProgram),t.quit&&(_=t.quit);var q;t.wasmBinary&&(q=t.wasmBinary),typeof WebAssembly!="object"&&me("no native wasm support detected");var te,Le=!1,br,U,T,z,oe,X,w,Oe,Se;function Ue(){var e=te.buffer;t.HEAP8=U=new Int8Array(e),t.HEAP16=z=new Int16Array(e),t.HEAPU8=T=new Uint8Array(e),t.HEAPU16=oe=new Uint16Array(e),t.HEAP32=X=new Int32Array(e),t.HEAPU32=w=new Uint32Array(e),t.HEAPF32=Oe=new Float32Array(e),t.HEAPF64=Se=new Float64Array(e)}var We=[],Ie=[],$e=[],_r=!1;function wr(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)Tr(t.preRun.shift());be(We)}function Ar(){_r=!0,be(Ie)}function Cr(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)Pr(t.postRun.shift());be($e)}function Tr(e){We.unshift(e)}function Fr(e){Ie.unshift(e)}function Pr(e){$e.unshift(e)}var W=0,ye=null,J=null;function Er(e){W++,t.monitorRunDependencies?.(W)}function Rr(e){if(W--,t.monitorRunDependencies?.(W),W==0&&(ye!==null&&(clearInterval(ye),ye=null),J)){var r=J;J=null,r()}}function me(e){t.onAbort?.(e),e="Aborted("+e+")",G(e),Le=!0,br=1,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw f(r),r}var kr="data:application/octet-stream;base64,",De=e=>e.startsWith(kr),ae=e=>e.startsWith("file://"),I;t.locateFile?(I="silk_wasm.wasm",De(I)||(I=mr(I))):I=new URL("silk_wasm.wasm",fe).href;function Ve(e){if(e==I&&q)return new Uint8Array(q);if(ne)return ne(e);throw"both async and sync fetching of the wasm failed"}function Lr(e){if(!q&&(R||V)){if(typeof fetch=="function"&&!ae(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw`failed to load wasm binary file at '${e}'`;return r.arrayBuffer()}).catch(()=>Ve(e));if(re)return new Promise((r,n)=>{re(e,a=>r(new Uint8Array(a)),n)})}return Promise.resolve().then(()=>Ve(e))}function Me(e,r,n){return Lr(e).then(a=>WebAssembly.instantiate(a,r)).then(n,a=>{G(`failed to asynchronously prepare wasm: ${a}`),me(a)})}function Or(e,r,n,a){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!De(r)&&!ae(r)&&!K&&typeof fetch=="function"?fetch(r,{credentials:"same-origin"}).then(s=>{var u=WebAssembly.instantiateStreaming(s,n);return u.then(a,function(d){return G(`wasm streaming compile failed: ${d}`),G("falling back to ArrayBuffer instantiation"),Me(r,n,a)})}):Me(r,n,a)}function Sr(){var e={a:Vn};function r(a,s){return E=a.exports,te=E.u,Ue(),ze=E.w,Fr(E.v),Rr("wasm-instantiate"),E}Er("wasm-instantiate");function n(a){r(a.instance)}if(t.instantiateWasm)try{return t.instantiateWasm(e,r)}catch(a){G(`Module.instantiateWasm callback failed with error: ${a}`),f(a)}return Or(q,I,e,n).catch(f),{}}var be=e=>{for(;e.length>0;)e.shift()(t)},wt=t.noExitRuntime||!0;class Ur{constructor(r){this.excPtr=r,this.ptr=r-24}set_type(r){w[this.ptr+4>>2]=r}get_type(){return w[this.ptr+4>>2]}set_destructor(r){w[this.ptr+8>>2]=r}get_destructor(){return w[this.ptr+8>>2]}set_caught(r){r=r?1:0,U[this.ptr+12]=r}get_caught(){return U[this.ptr+12]!=0}set_rethrown(r){r=r?1:0,U[this.ptr+13]=r}get_rethrown(){return U[this.ptr+13]!=0}init(r,n){this.set_adjusted_ptr(0),this.set_type(r),this.set_destructor(n)}set_adjusted_ptr(r){w[this.ptr+16>>2]=r}get_adjusted_ptr(){return w[this.ptr+16>>2]}get_exception_ptr(){var r=nr(this.get_type());if(r)return w[this.excPtr>>2];var n=this.get_adjusted_ptr();return n!==0?n:this.excPtr}}var je=0,Wr=0,Ir=(e,r,n)=>{var a=new Ur(e);throw a.init(r,n),je=e,Wr++,je},$r=(e,r,n,a,s)=>{},Dr=()=>{for(var e=new Array(256),r=0;r<256;++r)e[r]=String.fromCharCode(r);Ne=e},Ne,P=e=>{for(var r="",n=e;T[n];)r+=Ne[T[n++]];return r},M={},$={},ie={},He,F=e=>{throw new He(e)},Be,xe=e=>{throw new Be(e)},Vr=(e,r,n)=>{e.forEach(function(c){ie[c]=r});function a(c){var p=n(c);p.length!==e.length&&xe("Mismatched type converter count");for(var g=0;g<e.length;++g)k(e[g],p[g])}var s=new Array(r.length),u=[],d=0;r.forEach((c,p)=>{$.hasOwnProperty(c)?s[p]=$[c]:(u.push(c),M.hasOwnProperty(c)||(M[c]=[]),M[c].push(()=>{s[p]=$[c],++d,d===u.length&&a(s)}))}),u.length===0&&a(s)};function Mr(e,r,n={}){var a=r.name;if(e||F(`type "${a}" must have a positive integer typeid pointer`),$.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;F(`Cannot register type '${a}' twice`)}if($[e]=r,delete ie[e],M.hasOwnProperty(e)){var s=M[e];delete M[e],s.forEach(u=>u())}}function k(e,r,n={}){if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Mr(e,r,n)}var D=8,jr=(e,r,n,a)=>{r=P(r),k(e,{name:r,fromWireType:function(s){return!!s},toWireType:function(s,u){return u?n:a},argPackAdvance:D,readValueFromPointer:function(s){return this.fromWireType(T[s])},destructorFunction:null})},_e=[],L=[],we=e=>{e>9&&--L[e+1]===0&&(L[e]=void 0,_e.push(e))},Nr=()=>L.length/2-5-_e.length,Hr=()=>{L.push(0,1,void 0,1,null,1,!0,1,!1,1),t.count_emval_handles=Nr},j={toValue:e=>(e||F("Cannot use deleted val. handle = "+e),L[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{let r=_e.pop()||L.length;return L[r]=e,L[r+1]=1,r}}}};function Ae(e){return this.fromWireType(w[e>>2])}var Br={name:"emscripten::val",fromWireType:e=>{var r=j.toValue(e);return we(e),r},toWireType:(e,r)=>j.toHandle(r),argPackAdvance:D,readValueFromPointer:Ae,destructorFunction:null},xr=e=>k(e,Br),Kr=(e,r)=>{switch(r){case 4:return function(n){return this.fromWireType(Oe[n>>2])};case 8:return function(n){return this.fromWireType(Se[n>>3])};default:throw new TypeError(`invalid float width (${r}): ${e}`)}},Gr=(e,r,n)=>{r=P(r),k(e,{name:r,fromWireType:a=>a,toWireType:(a,s)=>s,argPackAdvance:D,readValueFromPointer:Kr(r,n),destructorFunction:null})},se=(e,r)=>Object.defineProperty(r,"name",{value:e}),Ke=e=>{for(;e.length;){var r=e.pop(),n=e.pop();n(r)}};function Ge(e){for(var r=1;r<e.length;++r)if(e[r]!==null&&e[r].destructorFunction===void 0)return!0;return!1}function qe(e,r){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var n=se(e.name||"unknownFunctionName",function(){});n.prototype=e.prototype;var a=new n,s=e.apply(a,r);return s instanceof Object?s:a}function qr(e,r,n,a){for(var s=Ge(e),u=e.length,d="",c="",p=0;p<u-2;++p)d+=(p!==0?", ":"")+"arg"+p,c+=(p!==0?", ":"")+"arg"+p+"Wired";var g=`
        return function (${d}) {
        if (arguments.length !== ${u-2}) {
          throwBindingError('function ' + humanName + ' called with ' + arguments.length + ' arguments, expected ${u-2}');
        }`;s&&(g+=`var destructors = [];
`);var m=s?"destructors":"null",b=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"];r&&(g+="var thisWired = classParam['toWireType']("+m+`, this);
`);for(var p=0;p<u-2;++p)g+="var arg"+p+"Wired = argType"+p+"['toWireType']("+m+", arg"+p+`);
`,b.push("argType"+p);if(r&&(c="thisWired"+(c.length>0?", ":"")+c),g+=(n||a?"var rv = ":"")+"invoker(fn"+(c.length>0?", ":"")+c+`);
`,s)g+=`runDestructors(destructors);
`;else for(var p=r?1:2;p<e.length;++p){var C=p===1?"thisWired":"arg"+(p-2)+"Wired";e[p].destructorFunction!==null&&(g+=`${C}_dtor(${C});
`,b.push(`${C}_dtor`))}return n&&(g+=`var ret = retType['fromWireType'](rv);
return ret;
`),g+=`}
`,[b,g]}function zr(e,r,n,a,s,u){var d=r.length;d<2&&F("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var c=r[1]!==null&&n!==null,p=Ge(r),g=r[0].name!=="void",m=[e,F,a,s,Ke,r[0],r[1]],b=0;b<d-2;++b)m.push(r[b+2]);if(!p)for(var b=c?1:2;b<r.length;++b)r[b].destructorFunction!==null&&m.push(r[b].destructorFunction);let[C,Q]=qr(r,c,g,u);C.push(Q);var N=qe(Function,C)(...m);return se(e,N)}var Xr=(e,r,n)=>{if(e[r].overloadTable===void 0){var a=e[r];e[r]=function(...s){return e[r].overloadTable.hasOwnProperty(s.length)||F(`Function '${n}' called with an invalid number of arguments (${s.length}) - expects one of (${e[r].overloadTable})!`),e[r].overloadTable[s.length].apply(this,s)},e[r].overloadTable=[],e[r].overloadTable[a.argCount]=a}},Jr=(e,r,n)=>{t.hasOwnProperty(e)?((n===void 0||t[e].overloadTable!==void 0&&t[e].overloadTable[n]!==void 0)&&F(`Cannot register public name '${e}' twice`),Xr(t,e,e),t.hasOwnProperty(n)&&F(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),t[e].overloadTable[n]=r):(t[e]=r,n!==void 0&&(t[e].numArguments=n))},Qr=(e,r)=>{for(var n=[],a=0;a<e;a++)n.push(w[r+a*4>>2]);return n},Yr=(e,r,n)=>{t.hasOwnProperty(e)||xe("Replacing nonexistant public symbol"),t[e].overloadTable!==void 0&&n!==void 0?t[e].overloadTable[n]=r:(t[e]=r,t[e].argCount=n)},Zr=(e,r,n)=>{var a=t["dynCall_"+e];return a(r,...n)},le=[],ze,Xe=e=>{var r=le[e];return r||(e>=le.length&&(le.length=e+1),le[e]=r=ze.get(e)),r},en=(e,r,n=[])=>{if(e.includes("j"))return Zr(e,r,n);var a=Xe(r)(...n);return a},rn=(e,r)=>(...n)=>en(e,r,n),nn=(e,r)=>{e=P(e);function n(){return e.includes("j")?rn(e,r):Xe(r)}var a=n();return typeof a!="function"&&F(`unknown function pointer with signature ${e}: ${r}`),a},tn=(e,r)=>{var n=se(r,function(a){this.name=r,this.message=a;var s=new Error(a).stack;s!==void 0&&(this.stack=this.toString()+`
`+s.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},n},Je,Qe=e=>{var r=rr(e),n=P(r);return O(r),n},on=(e,r)=>{var n=[],a={};function s(u){if(!a[u]&&!$[u]){if(ie[u]){ie[u].forEach(s);return}n.push(u),a[u]=!0}}throw r.forEach(s),new Je(`${e}: `+n.map(Qe).join([", "]))},an=e=>{e=e.trim();let r=e.indexOf("(");return r!==-1?e.substr(0,r):e},sn=(e,r,n,a,s,u,d)=>{var c=Qr(r,n);e=P(e),e=an(e),s=nn(a,s),Jr(e,function(){on(`Cannot call ${e} due to unbound types`,c)},r-1),Vr([],c,p=>{var g=[p[0],null].concat(p.slice(1));return Yr(e,zr(e,g,null,s,u,d),r-1),[]})},ln=(e,r,n)=>{switch(r){case 1:return n?a=>U[a]:a=>T[a];case 2:return n?a=>z[a>>1]:a=>oe[a>>1];case 4:return n?a=>X[a>>2]:a=>w[a>>2];default:throw new TypeError(`invalid integer width (${r}): ${e}`)}},un=(e,r,n,a,s)=>{r=P(r),s===-1&&(s=4294967295);var u=m=>m;if(a===0){var d=32-8*n;u=m=>m<<d>>>d}var c=r.includes("unsigned"),p=(m,b)=>{},g;c?g=function(m,b){return p(b,this.name),b>>>0}:g=function(m,b){return p(b,this.name),b},k(e,{name:r,fromWireType:u,toWireType:g,argPackAdvance:D,readValueFromPointer:ln(r,n,a!==0),destructorFunction:null})},cn=(e,r,n)=>{var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],s=a[r];function u(d){var c=w[d>>2],p=w[d+4>>2];return new s(U.buffer,p,c)}n=P(n),k(e,{name:n,fromWireType:u,argPackAdvance:D,readValueFromPointer:u},{ignoreDuplicateRegistrations:!0})},fn=(e,r,n,a)=>{if(!(a>0))return 0;for(var s=n,u=n+a-1,d=0;d<e.length;++d){var c=e.charCodeAt(d);if(c>=55296&&c<=57343){var p=e.charCodeAt(++d);c=65536+((c&1023)<<10)|p&1023}if(c<=127){if(n>=u)break;r[n++]=c}else if(c<=2047){if(n+1>=u)break;r[n++]=192|c>>6,r[n++]=128|c&63}else if(c<=65535){if(n+2>=u)break;r[n++]=224|c>>12,r[n++]=128|c>>6&63,r[n++]=128|c&63}else{if(n+3>=u)break;r[n++]=240|c>>18,r[n++]=128|c>>12&63,r[n++]=128|c>>6&63,r[n++]=128|c&63}}return r[n]=0,n-s},dn=(e,r,n)=>fn(e,T,r,n),pn=e=>{for(var r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a<=127?r++:a<=2047?r+=2:a>=55296&&a<=57343?(r+=4,++n):r+=3}return r},Ye=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,hn=(e,r,n)=>{for(var a=r+n,s=r;e[s]&&!(s>=a);)++s;if(s-r>16&&e.buffer&&Ye)return Ye.decode(e.subarray(r,s));for(var u="";r<s;){var d=e[r++];if(!(d&128)){u+=String.fromCharCode(d);continue}var c=e[r++]&63;if((d&224)==192){u+=String.fromCharCode((d&31)<<6|c);continue}var p=e[r++]&63;if((d&240)==224?d=(d&15)<<12|c<<6|p:d=(d&7)<<18|c<<12|p<<6|e[r++]&63,d<65536)u+=String.fromCharCode(d);else{var g=d-65536;u+=String.fromCharCode(55296|g>>10,56320|g&1023)}}return u},gn=(e,r)=>e?hn(T,e,r):"",vn=(e,r)=>{r=P(r);var n=r==="std::string";k(e,{name:r,fromWireType(a){var s=w[a>>2],u=a+4,d;if(n)for(var c=u,p=0;p<=s;++p){var g=u+p;if(p==s||T[g]==0){var m=g-c,b=gn(c,m);d===void 0?d=b:(d+="\0",d+=b),c=g+1}}else{for(var C=new Array(s),p=0;p<s;++p)C[p]=String.fromCharCode(T[u+p]);d=C.join("")}return O(a),d},toWireType(a,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var u,d=typeof s=="string";d||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array||F("Cannot pass non-string to std::string"),n&&d?u=pn(s):u=s.length;var c=Te(4+u+1),p=c+4;if(w[c>>2]=u,n&&d)dn(s,p,u+1);else if(d)for(var g=0;g<u;++g){var m=s.charCodeAt(g);m>255&&(O(p),F("String has UTF-16 code units that do not fit in 8 bits")),T[p+g]=m}else for(var g=0;g<u;++g)T[p+g]=s[g];return a!==null&&a.push(O,c),c},argPackAdvance:D,readValueFromPointer:Ae,destructorFunction(a){O(a)}})},Ze=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,yn=(e,r)=>{for(var n=e,a=n>>1,s=a+r/2;!(a>=s)&&oe[a];)++a;if(n=a<<1,n-e>32&&Ze)return Ze.decode(T.subarray(e,n));for(var u="",d=0;!(d>=r/2);++d){var c=z[e+d*2>>1];if(c==0)break;u+=String.fromCharCode(c)}return u},mn=(e,r,n)=>{if(n??=2147483647,n<2)return 0;n-=2;for(var a=r,s=n<e.length*2?n/2:e.length,u=0;u<s;++u){var d=e.charCodeAt(u);z[r>>1]=d,r+=2}return z[r>>1]=0,r-a},bn=e=>e.length*2,_n=(e,r)=>{for(var n=0,a="";!(n>=r/4);){var s=X[e+n*4>>2];if(s==0)break;if(++n,s>=65536){var u=s-65536;a+=String.fromCharCode(55296|u>>10,56320|u&1023)}else a+=String.fromCharCode(s)}return a},wn=(e,r,n)=>{if(n??=2147483647,n<4)return 0;for(var a=r,s=a+n-4,u=0;u<e.length;++u){var d=e.charCodeAt(u);if(d>=55296&&d<=57343){var c=e.charCodeAt(++u);d=65536+((d&1023)<<10)|c&1023}if(X[r>>2]=d,r+=4,r+4>s)break}return X[r>>2]=0,r-a},An=e=>{for(var r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=55296&&a<=57343&&++n,r+=4}return r},Cn=(e,r,n)=>{n=P(n);var a,s,u,d;r===2?(a=yn,s=mn,d=bn,u=c=>oe[c>>1]):r===4&&(a=_n,s=wn,d=An,u=c=>w[c>>2]),k(e,{name:n,fromWireType:c=>{for(var p=w[c>>2],g,m=c+4,b=0;b<=p;++b){var C=c+4+b*r;if(b==p||u(C)==0){var Q=C-m,N=a(m,Q);g===void 0?g=N:(g+="\0",g+=N),m=C+r}}return O(c),g},toWireType:(c,p)=>{typeof p!="string"&&F(`Cannot pass non-string to C++ string type ${n}`);var g=d(p),m=Te(4+g+r);return w[m>>2]=g/r,s(p,m+4,g+r),c!==null&&c.push(O,m),m},argPackAdvance:D,readValueFromPointer:Ae,destructorFunction(c){O(c)}})},Tn=(e,r)=>{r=P(r),k(e,{isVoid:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:(n,a)=>{}})},Ce=[],Fn=(e,r,n,a)=>(e=Ce[e],r=j.toValue(r),e(null,r,n,a)),Pn=e=>{var r=Ce.length;return Ce.push(e),r},er=(e,r)=>{var n=$[e];return n===void 0&&F(`${r} has unknown type ${Qe(e)}`),n},En=(e,r)=>{for(var n=new Array(e),a=0;a<e;++a)n[a]=er(w[r+a*4>>2],"parameter "+a);return n},At=Reflect.construct,Rn=(e,r,n)=>{var a=[],s=e.toWireType(a,n);return a.length&&(w[r>>2]=j.toHandle(a)),s},kn=(e,r,n)=>{var a=En(e,r),s=a.shift();e--;var u=`return function (obj, func, destructorsRef, args) {
`,d=0,c=[];n===0&&c.push("obj");for(var p=["retType"],g=[s],m=0;m<e;++m)c.push("arg"+m),p.push("argType"+m),g.push(a[m]),u+=`  var arg${m} = argType${m}.readValueFromPointer(args${d?"+"+d:""});
`,d+=a[m].argPackAdvance;var b=n===1?"new func":"func.call";u+=`  var rv = ${b}(${c.join(", ")});
`,s.isVoid||(p.push("emval_returnValue"),g.push(Rn),u+=`  return emval_returnValue(retType, destructorsRef, rv);
`),u+=`};
`,p.push(u);var C=qe(Function,p)(...g),Q=`methodCaller<(${a.map(N=>N.name).join(", ")}) => ${s.name}>`;return Pn(se(Q,C))},Ln=e=>{e>9&&(L[e+1]+=1)},On=e=>{var r=j.toValue(e);Ke(r),we(e)},Sn=(e,r)=>{e=er(e,"_emval_take_value");var n=e.readValueFromPointer(r);return j.toHandle(n)},Un=()=>{me("")},Wn=(e,r,n)=>T.copyWithin(e,r,r+n),In=()=>2147483648,$n=e=>{var r=te.buffer,n=(e-r.byteLength+65535)/65536;try{return te.grow(n),Ue(),1}catch{}},Dn=e=>{var r=T.length;e>>>=0;var n=In();if(e>n)return!1;for(var a=(p,g)=>p+(g-p%g)%g,s=1;s<=4;s*=2){var u=r*(1+.2/s);u=Math.min(u,e+100663296);var d=Math.min(n,a(Math.max(e,u),65536)),c=$n(d);if(c)return!0}return!1};Dr(),He=t.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},Be=t.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Hr(),Je=t.UnboundTypeError=tn(Error,"UnboundTypeError");var Vn={k:Ir,o:$r,i:jr,s:xr,h:Gr,d:sn,b:un,a:cn,g:vn,f:Cn,j:Tn,m:Fn,c:we,n:kn,e:Ln,l:On,t:Sn,p:Un,r:Wn,q:Dn},E=Sr(),Mn=()=>(Mn=E.v)(),Te=e=>(Te=E.x)(e),O=e=>(O=E.y)(e),rr=e=>(rr=E.z)(e),nr=e=>(nr=E.A)(e),ue;J=function e(){ue||tr(),ue||(J=e)};function tr(){if(W>0||(wr(),W>0))return;function e(){ue||(ue=!0,t.calledRun=!0,!Le&&(Ar(),l(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Cr()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),e()},1)):e()}if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return tr(),i.ready}})(),ir=et;function sr(o){try{let i=lr(o),t=ur(i.get("fmt")),l=i.get("data");return cr(t),fr(l,t),!0}catch{return!1}}var rt=["int","float"],nt=[0,0,0,1];function tt(o){let i=lr(o),t=ur(i.get("fmt")),l=i.get("data"),f=cr(t),h=nt[f],v=rt[h]+t.bitsPerSample;return fr(l,t),{channelData:at(l,t,f),sampleRate:t.sampleRate,numberOfChannels:t.numberOfChannels,audioEncoding:h,bitsPerSample:t.bitsPerSample,wavFileTypeName:v}}function lr(o){let i;o instanceof ArrayBuffer?i=new DataView(o):i=new DataView(o.buffer,o.byteOffset,o.byteLength);let t=i.byteLength;if(t<20)throw new Error("WAV file is too short.");if(Fe(i,0,4)!="RIFF")throw new Error("Not a valid WAV file (no RIFF header).");let l=i.getUint32(4,!0);if(8+l!=t)throw new Error(`Main chunk length of WAV file (${8+l}) does not match file size (${t}).`);if(Fe(i,8,4)!="WAVE")throw new Error("RIFF file is not a WAV file.");let f=new Map,h=12;for(;h<t;){if(h+8>t)throw new Error(`Incomplete chunk prefix in WAV file at offset ${h}.`);let v=Fe(i,h,4).trim(),y=i.getUint32(h+4,!0);if(h+8+y>t)throw new Error(`Incomplete chunk data in WAV file at offset ${h}.`);let _=new DataView(i.buffer,i.byteOffset+h+8,y);f.set(v,_);let R=y%2;h+=8+y+R}return f}function Fe(o,i,t){let l=new Uint8Array(o.buffer,o.byteOffset+i,t);return String.fromCharCode.apply(null,l)}function ot(o,i){let t=o.getInt8(i+2)*65536,l=o.getUint16(i,!0);return t+l}function ur(o){if(!o)throw new Error("No format chunk found in WAV file.");if(o.byteLength<16)throw new Error("Format chunk of WAV file is too short.");let i={};return i.formatCode=o.getUint16(0,!0),i.numberOfChannels=o.getUint16(2,!0),i.sampleRate=o.getUint32(4,!0),i.bytesPerSec=o.getUint32(8,!0),i.bytesPerFrame=o.getUint16(12,!0),i.bitsPerSample=o.getUint16(14,!0),i}function cr(o){if(o.numberOfChannels<1||o.numberOfChannels>999)throw new Error("Invalid number of channels in WAV file.");let i=Math.ceil(o.bitsPerSample/8),t=o.numberOfChannels*i;if(o.formatCode==1&&o.bitsPerSample>=1&&o.bitsPerSample<=8&&o.bytesPerFrame==t)return 0;if(o.formatCode==1&&o.bitsPerSample>=9&&o.bitsPerSample<=16&&o.bytesPerFrame==t)return 1;if(o.formatCode==1&&o.bitsPerSample>=17&&o.bitsPerSample<=24&&o.bytesPerFrame==t)return 2;if(o.formatCode==3&&o.bitsPerSample==32&&o.bytesPerFrame==t)return 3;throw new Error(`Unsupported WAV file type, formatCode=${o.formatCode}, bitsPerSample=${o.bitsPerSample}, bytesPerFrame=${o.bytesPerFrame}, numberOfChannels=${o.numberOfChannels}.`)}function at(o,i,t){switch(t){case 0:return st(o,i);case 1:return it(o,i);case 2:return lt(o,i);case 3:return ut(o,i);default:throw new Error("No decoder.")}}function it(o,i){let t=de(o.byteLength,i),l=i.numberOfChannels,f=t[0].length,h=0;for(let v=0;v<f;v++)for(let y=0;y<l;y++){let _=o.getInt16(h,!0)/32768;t[y][v]=_,h+=2}return t}function st(o,i){let t=de(o.byteLength,i),l=i.numberOfChannels,f=t[0].length,h=0;for(let v=0;v<f;v++)for(let y=0;y<l;y++){let _=(o.getUint8(h)-128)/128;t[y][v]=_,h+=1}return t}function lt(o,i){let t=de(o.byteLength,i),l=i.numberOfChannels,f=t[0].length,h=0;for(let v=0;v<f;v++)for(let y=0;y<l;y++){let _=ot(o,h)/8388608;t[y][v]=_,h+=3}return t}function ut(o,i){let t=de(o.byteLength,i),l=i.numberOfChannels,f=t[0].length,h=0;for(let v=0;v<f;v++)for(let y=0;y<l;y++){let _=o.getFloat32(h,!0);t[y][v]=_,h+=4}return t}function de(o,i){let t=Math.floor(o/i.bytesPerFrame),l=new Array(i.numberOfChannels);for(let f=0;f<i.numberOfChannels;f++)l[f]=new Float32Array(t);return l}function fr(o,i){if(!o)throw new Error("No data chunk found in WAV file.");if(o.byteLength%i.bytesPerFrame!=0)throw new Error("WAV file data chunk length is not a multiple of frame size.")}function dr(o,i){if(o.length===0)return new Uint8Array;if(i===void 0){i=0;for(let f=0;f<o.length;f++)o[f].length&&(i+=o[f].length)}let t=new Uint8Array(i),l=0;for(let f=0;f<o.length;f++){let h=o[f];l+=ct(h,t,l,0,h.length)}return l<i&&t.fill(0,l,i),t}function ct(o,i,t,l,f){f-l>i.length-t&&(f=l+i.length-t);let h=f-l,v=o.length-l;return h>v&&(h=v),(l!==0||f<o.length)&&(o=new Uint8Array(o.buffer,o.byteOffset+l,h)),i.set(o,t),h}function ft(o){let{length:i}=o;if(i===1)return o[0];let t=new Float32Array(o[0].length);for(let l=0;l<t.length;l++){let f=0;for(let h=0;h<i;h++)f+=o[h][l];t[l]=f/i}return t}function dt(o){let i=o.length,t=Math.ceil(16/8),l=i*t,f=new ArrayBuffer(l),h=new Int16Array(f);for(let v=0;v<i;v++){let y=o[v],_=pt(y);h[v]=_}return f}function pt(o){return o*=32768,o=~~o,o>32767?32767:o}async function ht(o,i){let t=await ir(),l=ArrayBuffer.isView(o)?o.buffer:o;if(sr(o)){let{channelData:y,sampleRate:_}=tt(o);i||=_,l=dt(ft(y))}let f=[],h=0,v=t.silk_encode(l,l.byteLength,i,y=>{h+=y.length,f.push(Uint8Array.from(y))});if(v===0)throw new Error("silk encoding failure");return{data:dr(f,h).slice(0,-1),duration:v}}async function gt(o,i){let t=await ir(),l=ArrayBuffer.isView(o)?o.buffer:o,f=[],h=0,v=t.silk_decode(l,l.byteLength,i,y=>{h+=y.length,f.push(Uint8Array.from(y))});if(v===0)throw new Error("silk decoding failure");return{data:dr(f,h),duration:v}}function vt(o,i=20){let t=ArrayBuffer.isView(o)?o.buffer:o,l=o[0]===2?10:9,f=0,h=new DataView(t);for(;l<h.byteLength;){let v=h.getUint16(l,!0);l+=2,f+=1,l+=v}return f*i}function yt(o){return sr(o)}});var bt={};Gn(bt,{onBrowserWindowCreated:()=>mt});module.exports=qn(bt);var S=require("electron"),x=H(require("node:fs")),Re=H(require("node:path")),pe=H(hr());var B=H(require("node:fs")),gr=H(require("node:path"));function Ee(o){let i=B.default.readdirSync(o);for(let t of i){let l=gr.default.join(o,t);B.default.lstatSync(l).isDirectory()?(Ee(l),B.default.rmdirSync(l)):B.default.unlinkSync(l)}}function vr(o){try{return B.default.readFileSync(o,{encoding:null,flag:"r"}).toString("hex",0,7)}catch(t){console.error("\u8BFB\u53D6\u6587\u4EF6\u9519\u8BEF:",t);return}}function Y(...o){console.log("\x1B[32m[LLAPI]\x1B[0m",...o)}var Z={},ee={};function yr(){let o=LiteLoader.plugins.LLAPI.path.data,i=Re.default.join(o,"ptt");x.default.existsSync(i)?Ee(i):x.default.mkdirSync(i,{recursive:!0}),S.ipcMain.on("___!boot",t=>{t.returnValue||(t.returnValue={enabled:!1})}),S.ipcMain.on("___!log",(t,l,...f)=>{console[{0:"debug",1:"log",2:"info",3:"warn",4:"error"}[l]||"log"](`[!Renderer:Log:${t.sender.id}]`,...f)}),S.ipcMain.handle("LiteLoader.LLAPI_PRE.log",(t,...l)=>{console.log(...l)}),S.ipcMain.handle("LiteLoader.LLAPI_PRE.set_id",(t,l,f)=>{try{ee[l]="LL_DOWN_"+l}catch(h){return Y(h),{}}}),S.ipcMain.handle("LiteLoader.LLAPI_PRE.get_peer",t=>{try{return Z}catch(l){return Y(l),{}}}),S.ipcMain.handle("LiteLoader.LLAPI_PRE.exists",(t,l)=>{try{return x.default.existsSync(l)}catch(f){return console.log(f),{}}}),S.ipcMain.handle("LiteLoader.LLAPI_PRE.getSilk",async(t,l)=>{try{let f=Re.default.basename(l),h=x.default.readFileSync(l);if(vr(l)!=="02232153494c4b"){let v=await(0,pe.encode)(h,24e3);return x.default.writeFileSync(`${i}/${f}`,v.data),{path:`${i}/${f}`,duration:v.duration}}else{let v=(0,pe.getDuration)(h);return{path:l,duration:v}}}catch(f){return console.log(f),{}}})}function mt(o){let i=o.webContents.send,t=(v,...y)=>{switch(y?.[1]?.[0]?.cmdName){case"nodeIKernelMsgListener/onRecvMsg":o.webContents.send("new_message-main",y);break;case"onGroupListUpdate":o.webContents.send("groups-list-updated-main",y);break;case"onBuddyListChange":o.webContents.send("friends-list-updated-main",y);break;case"nodeIKernelProfileListener/onProfileSimpleChanged":o.webContents.send("user-info-list-main",y);break;case"nodeIKernelGroupListener/onGroupDetailInfoChange":break;case"nodeIKernelRecentContactListener/onRecentContactListChanged":break;case"nodeIKernelGroupListener/onGroupSingleScreenNotifies":break;case"nodeIKernelMsgListener/onAddSendMsg":break}if(v.includes("LiteLoader")||y?.[1]?.account?.length>0&&o.webContents.send("user-login-main",y[1]),y[0]?.callbackId){let _=y[0].callbackId;_ in ee&&(o.webContents.send(ee[_],y[1]),delete ee[_])}return i.call(o.webContents,v,...y)};o.webContents.send=t;function l(v,y,_,...R){if(_!=="___!log"&&R[0][1]&&R[0][1][0]!="info"){let V=R[0][0],K=R[0][1];switch(K?.[0]){case"nodeIKernelMsgService/setMsgRead":let A=K[1]?.peer;Z.uid=A.peerUid,Z.guildId=A.guildId,Z.chatType=A.chatType==1?"friend":A.chatType==2?"group":"others",o.webContents.send("set_message-main");break;case"nodeIKernelMsgService/sendMsg":break;case"nodeIKernelMsgService/forwardMsgWithComment":break;case"nodeIKernelMsgService/getRichMediaFilePathForGuild":break;case"openExternalWindow":break;default:break}}}let f=o.webContents._events["-ipc-message"]?.[0]||o.webContents._events["-ipc-message"],h=new Proxy(f,{apply(v,y,_){return l(..._),v.apply(y,_)}});o.webContents._events["-ipc-message"][0]?o.webContents._events["-ipc-message"][0]=h:o.webContents._events["-ipc-message"]=h,o.webContents.on("ipc-message-sync",(v,y,..._)=>{y=="___!boot"&&(v.returnValue={enabled:!0,webContentsId:o.webContents.id.toString()})}),o.webContents.on("did-finish-load",()=>{Y("Page finished loading")})}yr();0&&(module.exports={onBrowserWindowCreated});
